import{u as A,o as M,a as O,b as E,Q as z,c as m,d as J,e as K}from"./QCard-CGkqR2u6.js";import{k as G,a1 as W,g as X,a2 as Z,r,c as b,a3 as L,h as d,V as H,O as Y,l as ee,I as R,d as le,R as V,U as v,f as s,Z as U,X as Q,S as k,P as ae,_ as T,W as D,a4 as B,a5 as te,Q as f}from"./index-OwbA6s1l.js";import{u as oe,a as se}from"./use-dark-BNvsAhk8.js";import{Q as ue}from"./QPage-DsU03gqA.js";const ne=()=>d("svg",{key:"svg",class:"q-radio__bg absolute non-selectable",viewBox:"0 0 24 24"},[d("path",{d:"M12,22a10,10 0 0 1 -10,-10a10,10 0 0 1 10,-10a10,10 0 0 1 10,10a10,10 0 0 1 -10,10m0,-22a12,12 0 0 0 -12,12a12,12 0 0 0 12,12a12,12 0 0 0 12,-12a12,12 0 0 0 -12,-12"}),d("path",{class:"q-radio__check",d:"M12,6a6,6 0 0 0 -6,6a6,6 0 0 0 6,6a6,6 0 0 0 6,-6a6,6 0 0 0 -6,-6"})]),S=G({name:"QRadio",props:{...oe,...W,...A,modelValue:{required:!0},val:{required:!0},label:String,leftLabel:Boolean,checkedIcon:String,uncheckedIcon:String,color:String,keepColor:Boolean,dense:Boolean,disable:Boolean,tabindex:[String,Number]},emits:["update:modelValue"],setup(a,{slots:C,emit:o}){const{proxy:g}=X(),p=se(a,g.$q),c=Z(a,M),h=r(null),{refocusTargetEl:i,refocusTarget:w}=O(a,h),u=b(()=>L(a.modelValue)===L(a.val)),x=b(()=>"q-radio cursor-pointer no-outline row inline no-wrap items-center"+(a.disable===!0?" disabled":"")+(p.value===!0?" q-radio--dark":"")+(a.dense===!0?" q-radio--dense":"")+(a.leftLabel===!0?" reverse":"")),n=b(()=>{const t=a.color!==void 0&&(a.keepColor===!0||u.value===!0)?` text-${a.color}`:"";return`q-radio__inner relative-position q-radio__inner--${u.value===!0?"truthy":"falsy"}${t}`}),q=b(()=>(u.value===!0?a.checkedIcon:a.uncheckedIcon)||null),_=b(()=>a.disable===!0?-1:a.tabindex||0),y=b(()=>{const t={type:"radio"};return a.name!==void 0&&Object.assign(t,{".checked":u.value===!0,"^checked":u.value===!0?"checked":void 0,name:a.name,value:a.val}),t}),l=E(y);function e(t){t!==void 0&&(R(t),w(t)),a.disable!==!0&&u.value!==!0&&o("update:modelValue",a.val,t)}function j(t){(t.keyCode===13||t.keyCode===32)&&R(t)}function $(t){(t.keyCode===13||t.keyCode===32)&&e(t)}Object.assign(g,{set:e});const F=ne();return()=>{const t=q.value!==null?[d("div",{key:"icon",class:"q-radio__icon-container absolute-full flex flex-center no-wrap"},[d(H,{class:"q-radio__icon",name:q.value})])]:[F];a.disable!==!0&&l(t,"unshift"," q-radio__native q-ma-none q-pa-none");const I=[d("div",{class:n.value,style:c.value,"aria-hidden":"true"},t)];i.value!==null&&I.push(i.value);const N=a.label!==void 0?Y(C.default,[a.label]):ee(C.default);return N!==void 0&&I.push(d("div",{class:"q-radio__label q-anchor--skip"},N)),d("div",{ref:h,class:x.value,tabindex:_.value,role:"radio","aria-label":a.label,"aria-checked":u.value===!0?"true":"false","aria-disabled":a.disable===!0?"true":void 0,onClick:e,onKeydown:j,onKeyup:$},I)}}}),re={class:"text-h6 text-center"},ie={key:4,class:"q-px-sm"},de={class:"q-gutter-sm row"},P="https://api-calorie.surindev.com",ge=le({__name:"LoginForm",setup(a){const C=te(),o=r(!1),g=r("กันตพงศ์ แก้วเกษ"),p=r("kantaphong@gmail.com"),c=r("password123"),h=r("password123"),i=r(!1),w=r("27"),u=r("63"),x=r("170"),n=r("male");function q(){o.value=!o.value}async function _(){if(i.value=!0,o.value){const y={name:g.value,email:p.value,password:c.value,gender:n.value,age:Number(w.value),weight:Number(u.value),height:Number(x.value)};try{const l=await fetch(`${P}/api/Register`,{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify(y)});if(!l.ok){const e=await l.text();throw new Error(e||"Registration successful")}B.create({type:"positive",position:"top-right",message:"สมัครสมาชิกสำเร็จ! กรุณาเข้าสู่ระบบ"}),q(),i.value=!1}catch(l){i.value=!1,console.error("error",l)}}else{const y={email:p.value,password:c.value};alert("เข้าโหมด Login");const l=await fetch(`${P}/api/Login`,{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify(y)});if(l.ok){alert("Login failed");const e=await l.json();console.log(e),localStorage.setItem("authToken",e.token),localStorage.setItem("UserID",e.user.id),C.replace("/calorie"),i.value=!1,B.create({type:"positive",position:"top-right",message:"Login successful!"})}else{alert("Login failed");const e=await l.text();if(e){B.create({type:"negative",position:"top-right",message:`Login Failed! ${e}`}),i.value=!1;return}i.value=!1}}}return(y,l)=>(f(),V(ue,{class:"flex flex-center bg-grey-2"},{default:v(()=>[s(K,{style:{width:"400px","max-width":"90vw"}},{default:v(()=>[s(z,{class:"bg-primary text-white"},{default:v(()=>[U("div",re,Q(o.value?"สมัครสมาชิกใหม่":"เข้าสู่ระบบ"),1)]),_:1}),s(z,{class:"q-gutter-md"},{default:v(()=>[o.value?(f(),V(m,{key:0,modelValue:g.value,"onUpdate:modelValue":l[0]||(l[0]=e=>g.value=e),label:"ชื่อ-นามสกุล",dense:"",outlined:"","lazy-rules":"",rules:[e=>e&&e.length>0||"กรุณากรอกชื่อ"]},null,8,["modelValue","rules"])):k("",!0),o.value?(f(),V(m,{key:1,modelValue:w.value,"onUpdate:modelValue":l[1]||(l[1]=e=>w.value=e),label:"อายุ",type:"number",dense:"",outlined:"","lazy-rules":"",rules:[e=>e&&e.length>0||"กรุณากรอกอายุ"]},null,8,["modelValue","rules"])):k("",!0),o.value?(f(),V(m,{key:2,modelValue:x.value,"onUpdate:modelValue":l[2]||(l[2]=e=>x.value=e),label:"ส่วนสูง",type:"number",dense:"",outlined:"","lazy-rules":"",rules:[e=>e&&e.length>0||"กรุณากรอกส่วนสูง"]},null,8,["modelValue","rules"])):k("",!0),o.value?(f(),V(m,{key:3,modelValue:u.value,"onUpdate:modelValue":l[3]||(l[3]=e=>u.value=e),label:"น้ำหนัก",type:"number",dense:"",outlined:"","lazy-rules":"",rules:[e=>e&&e.length>0||"กรุณากรอกน้ำหนัก"]},null,8,["modelValue","rules"])):k("",!0),o.value?(f(),ae("div",ie,[l[11]||(l[11]=U("div",{class:"text-grey-7 q-mb-sm",style:{"font-size":"14px"}},"เพศ",-1)),U("div",de,[s(S,{modelValue:n.value,"onUpdate:modelValue":l[4]||(l[4]=e=>n.value=e),val:"male",label:"ชาย",dense:"",color:"primary"},null,8,["modelValue"]),s(S,{modelValue:n.value,"onUpdate:modelValue":l[5]||(l[5]=e=>n.value=e),val:"female",label:"หญิง",dense:"",color:"pink"},null,8,["modelValue"]),s(S,{modelValue:n.value,"onUpdate:modelValue":l[6]||(l[6]=e=>n.value=e),val:"lgbtq",label:"LGBTQ+",dense:"",color:"purple"},null,8,["modelValue"]),s(S,{modelValue:n.value,"onUpdate:modelValue":l[7]||(l[7]=e=>n.value=e),val:"not_specified",label:"ไม่ระบุ",dense:"",color:"grey"},null,8,["modelValue"])])])):k("",!0),s(m,{modelValue:p.value,"onUpdate:modelValue":l[8]||(l[8]=e=>p.value=e),label:"อีเมล",type:"email",dense:"",outlined:"","lazy-rules":"",rules:[e=>e&&e.length>0||"กรุณากรอกอีเมล"]},null,8,["modelValue","rules"]),s(m,{modelValue:c.value,"onUpdate:modelValue":l[9]||(l[9]=e=>c.value=e),label:"รหัสผ่าน",type:"password",dense:"",outlined:"","lazy-rules":"",rules:[e=>e&&e.length>0||"กรุณากรอกรหัสผ่าน"]},null,8,["modelValue","rules"]),o.value?(f(),V(m,{key:5,modelValue:h.value,"onUpdate:modelValue":l[10]||(l[10]=e=>h.value=e),label:"ยืนยันรหัสผ่าน",type:"password",dense:"",outlined:"",rules:[e=>e===c.value||"รหัสผ่านไม่ตรงกัน"]},null,8,["modelValue","rules"])):k("",!0)]),_:1}),s(J,{class:"q-px-md q-pb-md column q-gutter-sm"},{default:v(()=>[s(T,{onClick:_,color:"primary",class:"full-width",loading:i.value},{default:v(()=>[D(Q(o.value?"ยืนยันการสมัคร":"เข้าสู่ระบบ"),1)]),_:1},8,["loading"]),s(T,{flat:"",color:"secondary",class:"full-width",onClick:q},{default:v(()=>[D(Q(o.value?"มีบัญชีอยู่แล้ว? เข้าสู่ระบบ":"ยังไม่มีบัญชี? สมัครสมาชิก"),1)]),_:1})]),_:1})]),_:1})]),_:1}))}});export{ge as default};
