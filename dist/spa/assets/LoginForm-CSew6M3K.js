import{u as F,o as A,a as M,b as O,Q as R,c as m,d as E,e as J}from"./QCard-CoC5umJZ.js";import{k as K,a1 as G,g as W,a2 as X,r,c as y,a3 as T,h as c,V as Z,O as H,l as Y,I as D,d as ee,R as b,U as v,f as u,Z as Q,X as B,S as V,P as le,_ as L,W as P,a4 as N,a5 as ae,Q as f}from"./index-Cp5fB4OS.js";import{u as te,a as oe}from"./use-dark-BkbyNRo5.js";import{Q as se}from"./QPage-2UdcoB4G.js";const ue=()=>c("svg",{key:"svg",class:"q-radio__bg absolute non-selectable",viewBox:"0 0 24 24"},[c("path",{d:"M12,22a10,10 0 0 1 -10,-10a10,10 0 0 1 10,-10a10,10 0 0 1 10,10a10,10 0 0 1 -10,10m0,-22a12,12 0 0 0 -12,12a12,12 0 0 0 12,12a12,12 0 0 0 12,-12a12,12 0 0 0 -12,-12"}),c("path",{class:"q-radio__check",d:"M12,6a6,6 0 0 0 -6,6a6,6 0 0 0 6,6a6,6 0 0 0 6,-6a6,6 0 0 0 -6,-6"})]),_=K({name:"QRadio",props:{...te,...G,...F,modelValue:{required:!0},val:{required:!0},label:String,leftLabel:Boolean,checkedIcon:String,uncheckedIcon:String,color:String,keepColor:Boolean,dense:Boolean,disable:Boolean,tabindex:[String,Number]},emits:["update:modelValue"],setup(a,{slots:q,emit:C}){const{proxy:o}=W(),k=oe(a,o.$q),g=X(a,A),i=r(null),{refocusTargetEl:h,refocusTarget:d}=M(a,i),n=y(()=>T(a.modelValue)===T(a.val)),w=y(()=>"q-radio cursor-pointer no-outline row inline no-wrap items-center"+(a.disable===!0?" disabled":"")+(k.value===!0?" q-radio--dark":"")+(a.dense===!0?" q-radio--dense":"")+(a.leftLabel===!0?" reverse":"")),x=y(()=>{const t=a.color!==void 0&&(a.keepColor===!0||n.value===!0)?` text-${a.color}`:"";return`q-radio__inner relative-position q-radio__inner--${n.value===!0?"truthy":"falsy"}${t}`}),s=y(()=>(n.value===!0?a.checkedIcon:a.uncheckedIcon)||null),S=y(()=>a.disable===!0?-1:a.tabindex||0),I=y(()=>{const t={type:"radio"};return a.name!==void 0&&Object.assign(t,{".checked":n.value===!0,"^checked":n.value===!0?"checked":void 0,name:a.name,value:a.val}),t}),p=O(I);function l(t){t!==void 0&&(D(t),d(t)),a.disable!==!0&&n.value!==!0&&C("update:modelValue",a.val,t)}function e(t){(t.keyCode===13||t.keyCode===32)&&D(t)}function j(t){(t.keyCode===13||t.keyCode===32)&&l(t)}Object.assign(o,{set:l});const $=ue();return()=>{const t=s.value!==null?[c("div",{key:"icon",class:"q-radio__icon-container absolute-full flex flex-center no-wrap"},[c(Z,{class:"q-radio__icon",name:s.value})])]:[$];a.disable!==!0&&p(t,"unshift"," q-radio__native q-ma-none q-pa-none");const U=[c("div",{class:x.value,style:g.value,"aria-hidden":"true"},t)];h.value!==null&&U.push(h.value);const z=a.label!==void 0?H(q.default,[a.label]):Y(q.default);return z!==void 0&&U.push(c("div",{class:"q-radio__label q-anchor--skip"},z)),c("div",{ref:i,class:w.value,tabindex:S.value,role:"radio","aria-label":a.label,"aria-checked":n.value===!0?"true":"false","aria-disabled":a.disable===!0?"true":void 0,onClick:l,onKeydown:e,onKeyup:j},U)}}}),ne={class:"text-h6 text-center"},re={key:4,class:"q-px-sm"},de={class:"q-gutter-sm row"},fe=ee({__name:"LoginForm",setup(a){const q=ae(),C="https://api-calorie.surindev.com",o=r(!1),k=r(""),g=r(""),i=r(""),h=r(""),d=r(!1),n=r(""),w=r(""),x=r(""),s=r("");function S(){o.value=!o.value}async function I(){if(d.value=!0,o.value){const p={name:k.value,email:g.value,password:i.value,gender:s.value,age:Number(n.value),weight:Number(w.value),height:Number(x.value)};try{const l=await fetch(`${C}/api/Register`,{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify(p)});if(!l.ok){const e=await l.text();throw new Error(e||"Registration successful")}N.create({type:"positive",position:"top-right",message:"สมัครสมาชิกสำเร็จ! กรุณาเข้าสู่ระบบ"}),S(),d.value=!1}catch(l){d.value=!1,console.error("error",l)}}else{const p={email:g.value,password:i.value},l=await fetch(`${C}/api/Login`,{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify(p)});if(l.ok){const e=await l.json();console.log(e),localStorage.setItem("authToken",e.token),localStorage.setItem("UserID",e.user.id),q.replace("/calorie"),d.value=!1,N.create({type:"positive",position:"top-right",message:"Login successful!"})}else{const e=await l.text();if(e){N.create({type:"negative",position:"top-right",message:`Login Failed! ${e}`}),d.value=!1;return}d.value=!1}}}return(p,l)=>(f(),b(se,{class:"flex flex-center bg-grey-2"},{default:v(()=>[u(J,{style:{width:"400px","max-width":"90vw"}},{default:v(()=>[u(R,{class:"bg-primary text-white"},{default:v(()=>[Q("div",ne,B(o.value?"สมัครสมาชิกใหม่":"เข้าสู่ระบบ"),1)]),_:1}),u(R,{class:"q-gutter-md"},{default:v(()=>[o.value?(f(),b(m,{key:0,modelValue:k.value,"onUpdate:modelValue":l[0]||(l[0]=e=>k.value=e),label:"ชื่อ-นามสกุล",dense:"",outlined:"","lazy-rules":"",rules:[e=>e&&e.length>0||"กรุณากรอกชื่อ"]},null,8,["modelValue","rules"])):V("",!0),o.value?(f(),b(m,{key:1,modelValue:n.value,"onUpdate:modelValue":l[1]||(l[1]=e=>n.value=e),label:"อายุ",type:"number",dense:"",outlined:"","lazy-rules":"",rules:[e=>e&&e.length>0||"กรุณากรอกอายุ"]},null,8,["modelValue","rules"])):V("",!0),o.value?(f(),b(m,{key:2,modelValue:x.value,"onUpdate:modelValue":l[2]||(l[2]=e=>x.value=e),label:"ส่วนสูง",type:"number",dense:"",outlined:"","lazy-rules":"",rules:[e=>e&&e.length>0||"กรุณากรอกส่วนสูง"]},null,8,["modelValue","rules"])):V("",!0),o.value?(f(),b(m,{key:3,modelValue:w.value,"onUpdate:modelValue":l[3]||(l[3]=e=>w.value=e),label:"น้ำหนัก",type:"number",dense:"",outlined:"","lazy-rules":"",rules:[e=>e&&e.length>0||"กรุณากรอกน้ำหนัก"]},null,8,["modelValue","rules"])):V("",!0),o.value?(f(),le("div",re,[l[11]||(l[11]=Q("div",{class:"text-grey-7 q-mb-sm",style:{"font-size":"14px"}},"เพศ",-1)),Q("div",de,[u(_,{modelValue:s.value,"onUpdate:modelValue":l[4]||(l[4]=e=>s.value=e),val:"male",label:"ชาย",dense:"",color:"primary"},null,8,["modelValue"]),u(_,{modelValue:s.value,"onUpdate:modelValue":l[5]||(l[5]=e=>s.value=e),val:"female",label:"หญิง",dense:"",color:"pink"},null,8,["modelValue"]),u(_,{modelValue:s.value,"onUpdate:modelValue":l[6]||(l[6]=e=>s.value=e),val:"lgbtq",label:"LGBTQ+",dense:"",color:"purple"},null,8,["modelValue"]),u(_,{modelValue:s.value,"onUpdate:modelValue":l[7]||(l[7]=e=>s.value=e),val:"not_specified",label:"ไม่ระบุ",dense:"",color:"grey"},null,8,["modelValue"])])])):V("",!0),u(m,{modelValue:g.value,"onUpdate:modelValue":l[8]||(l[8]=e=>g.value=e),label:"อีเมล",type:"email",dense:"",outlined:"","lazy-rules":"",rules:[e=>e&&e.length>0||"กรุณากรอกอีเมล"]},null,8,["modelValue","rules"]),u(m,{modelValue:i.value,"onUpdate:modelValue":l[9]||(l[9]=e=>i.value=e),label:"รหัสผ่าน",type:"password",dense:"",outlined:"","lazy-rules":"",rules:[e=>e&&e.length>0||"กรุณากรอกรหัสผ่าน"]},null,8,["modelValue","rules"]),o.value?(f(),b(m,{key:5,modelValue:h.value,"onUpdate:modelValue":l[10]||(l[10]=e=>h.value=e),label:"ยืนยันรหัสผ่าน",type:"password",dense:"",outlined:"",rules:[e=>e===i.value||"รหัสผ่านไม่ตรงกัน"]},null,8,["modelValue","rules"])):V("",!0)]),_:1}),u(E,{class:"q-px-md q-pb-md column q-gutter-sm"},{default:v(()=>[u(L,{onClick:I,color:"primary",class:"full-width",loading:d.value},{default:v(()=>[P(B(o.value?"ยืนยันการสมัคร":"เข้าสู่ระบบ"),1)]),_:1},8,["loading"]),u(L,{flat:"",color:"secondary",class:"full-width",onClick:S},{default:v(()=>[P(B(o.value?"มีบัญชีอยู่แล้ว? เข้าสู่ระบบ":"ยังไม่มีบัญชี? สมัครสมาชิก"),1)]),_:1})]),_:1})]),_:1})]),_:1}))}});export{fe as default};
