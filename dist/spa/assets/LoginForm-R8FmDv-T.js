import{u as F,o as A,f as M,b as O,e as E,d as T,Q as v,c as J}from"./option-sizes-Cso2NTy7.js";import{k as K,ad as G,g as W,ae as X,r,c as y,af as D,h as m,V as Y,O as Z,l as H,I as L,d as ee,R as b,U as c,Q as f,f as s,Y as _,X as B,S as V,P as le,Z as P,W as N,a8 as ae,ab as z,ag as te}from"./index-DTGUN23g.js";import{u as oe,a as se}from"./use-dark-BJ13Vz0Z.js";import{Q as ue}from"./QCardActions-BWEV8Q1W.js";const ne=()=>m("svg",{key:"svg",class:"q-radio__bg absolute non-selectable",viewBox:"0 0 24 24"},[m("path",{d:"M12,22a10,10 0 0 1 -10,-10a10,10 0 0 1 10,-10a10,10 0 0 1 10,10a10,10 0 0 1 -10,10m0,-22a12,12 0 0 0 -12,12a12,12 0 0 0 12,12a12,12 0 0 0 12,-12a12,12 0 0 0 -12,-12"}),m("path",{class:"q-radio__check",d:"M12,6a6,6 0 0 0 -6,6a6,6 0 0 0 6,6a6,6 0 0 0 6,-6a6,6 0 0 0 -6,-6"})]),I=K({name:"QRadio",props:{...oe,...G,...F,modelValue:{required:!0},val:{required:!0},label:String,leftLabel:Boolean,checkedIcon:String,uncheckedIcon:String,color:String,keepColor:Boolean,dense:Boolean,disable:Boolean,tabindex:[String,Number]},emits:["update:modelValue"],setup(a,{slots:q,emit:S}){const{proxy:o}=W(),k=se(a,o.$q),g=X(a,A),i=r(null),{refocusTargetEl:h,refocusTarget:d}=M(a,i),n=y(()=>D(a.modelValue)===D(a.val)),w=y(()=>"q-radio cursor-pointer no-outline row inline no-wrap items-center"+(a.disable===!0?" disabled":"")+(k.value===!0?" q-radio--dark":"")+(a.dense===!0?" q-radio--dense":"")+(a.leftLabel===!0?" reverse":"")),x=y(()=>{const t=a.color!==void 0&&(a.keepColor===!0||n.value===!0)?` text-${a.color}`:"";return`q-radio__inner relative-position q-radio__inner--${n.value===!0?"truthy":"falsy"}${t}`}),u=y(()=>(n.value===!0?a.checkedIcon:a.uncheckedIcon)||null),C=y(()=>a.disable===!0?-1:a.tabindex||0),Q=y(()=>{const t={type:"radio"};return a.name!==void 0&&Object.assign(t,{".checked":n.value===!0,"^checked":n.value===!0?"checked":void 0,name:a.name,value:a.val}),t}),p=O(Q);function l(t){t!==void 0&&(L(t),d(t)),a.disable!==!0&&n.value!==!0&&S("update:modelValue",a.val,t)}function e(t){(t.keyCode===13||t.keyCode===32)&&L(t)}function j(t){(t.keyCode===13||t.keyCode===32)&&l(t)}Object.assign(o,{set:l});const $=ne();return()=>{const t=u.value!==null?[m("div",{key:"icon",class:"q-radio__icon-container absolute-full flex flex-center no-wrap"},[m(Y,{class:"q-radio__icon",name:u.value})])]:[$];a.disable!==!0&&p(t,"unshift"," q-radio__native q-ma-none q-pa-none");const U=[m("div",{class:x.value,style:g.value,"aria-hidden":"true"},t)];h.value!==null&&U.push(h.value);const R=a.label!==void 0?Z(q.default,[a.label]):H(q.default);return R!==void 0&&U.push(m("div",{class:"q-radio__label q-anchor--skip"},R)),m("div",{ref:i,class:w.value,tabindex:C.value,role:"radio","aria-label":a.label,"aria-checked":n.value===!0?"true":"false","aria-disabled":a.disable===!0?"true":void 0,onClick:l,onKeydown:e,onKeyup:j},U)}}}),re={class:"text-h6 text-center"},de={key:4,class:"q-px-sm"},ie={class:"q-gutter-sm row"},ge=ee({__name:"LoginForm",setup(a){const q=te(),S="https://api-w4ic.onrender.com",o=r(!1),k=r(""),g=r(""),i=r(""),h=r(""),d=r(!1),n=r(""),w=r(""),x=r(""),u=r("");function C(){o.value=!o.value}async function Q(){if(d.value=!0,o.value){const p={name:k.value,email:g.value,password:i.value,gender:u.value,age:Number(n.value),weight:Number(w.value),height:Number(x.value)};try{const l=await fetch(`${S}/api/Register`,{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify(p)});if(!l.ok){const e=await l.text();throw new Error(e||"Registration successful")}z.create({type:"positive",position:"top-right",message:"สมัครสมาชิกสำเร็จ! กรุณาเข้าสู่ระบบ"}),C(),d.value=!1}catch(l){d.value=!1,console.error("error",l)}}else{const p={email:g.value,password:i.value},l=await fetch(`${S}/api/Login`,{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify(p)});if(l.ok){const e=await l.json();console.log(e),localStorage.setItem("authToken",e.token),localStorage.setItem("UserID",e.user.id),q.replace("/calorie"),d.value=!1,z.create({type:"positive",position:"top-right",message:"Login successful!"})}else{const e=await l.text();if(e){z.create({type:"negative",position:"top-right",message:`Login Failed! ${e}`}),d.value=!1;return}d.value=!1}}}return(p,l)=>(f(),b(E,{class:"flex flex-center bg-grey-2"},{default:c(()=>[s(J,{style:{width:"400px","max-width":"90vw"}},{default:c(()=>[s(T,{class:"bg-primary text-white"},{default:c(()=>[_("div",re,B(o.value?"สมัครสมาชิกใหม่":"เข้าสู่ระบบ"),1)]),_:1}),s(T,{class:"q-gutter-md"},{default:c(()=>[o.value?(f(),b(v,{key:0,modelValue:k.value,"onUpdate:modelValue":l[0]||(l[0]=e=>k.value=e),label:"ชื่อ-นามสกุล",dense:"",outlined:"","lazy-rules":"",rules:[e=>e&&e.length>0||"กรุณากรอกชื่อ"]},null,8,["modelValue","rules"])):V("",!0),o.value?(f(),b(v,{key:1,modelValue:n.value,"onUpdate:modelValue":l[1]||(l[1]=e=>n.value=e),label:"อายุ",type:"number",dense:"",outlined:"","lazy-rules":"",rules:[e=>e&&e.length>0||"กรุณากรอกอายุ"]},null,8,["modelValue","rules"])):V("",!0),o.value?(f(),b(v,{key:2,modelValue:x.value,"onUpdate:modelValue":l[2]||(l[2]=e=>x.value=e),label:"ส่วนสูง",type:"number",dense:"",outlined:"","lazy-rules":"",rules:[e=>e&&e.length>0||"กรุณากรอกส่วนสูง"]},null,8,["modelValue","rules"])):V("",!0),o.value?(f(),b(v,{key:3,modelValue:w.value,"onUpdate:modelValue":l[3]||(l[3]=e=>w.value=e),label:"น้ำหนัก",type:"number",dense:"",outlined:"","lazy-rules":"",rules:[e=>e&&e.length>0||"กรุณากรอกน้ำหนัก"]},null,8,["modelValue","rules"])):V("",!0),o.value?(f(),le("div",de,[l[11]||(l[11]=_("div",{class:"text-grey-7 q-mb-sm",style:{"font-size":"14px"}},"เพศ",-1)),_("div",ie,[s(I,{modelValue:u.value,"onUpdate:modelValue":l[4]||(l[4]=e=>u.value=e),val:"male",label:"ชาย",dense:"",color:"primary"},null,8,["modelValue"]),s(I,{modelValue:u.value,"onUpdate:modelValue":l[5]||(l[5]=e=>u.value=e),val:"female",label:"หญิง",dense:"",color:"pink"},null,8,["modelValue"]),s(I,{modelValue:u.value,"onUpdate:modelValue":l[6]||(l[6]=e=>u.value=e),val:"lgbtq",label:"LGBTQ+",dense:"",color:"purple"},null,8,["modelValue"]),s(I,{modelValue:u.value,"onUpdate:modelValue":l[7]||(l[7]=e=>u.value=e),val:"not_specified",label:"ไม่ระบุ",dense:"",color:"grey"},null,8,["modelValue"])])])):V("",!0),s(v,{modelValue:g.value,"onUpdate:modelValue":l[8]||(l[8]=e=>g.value=e),label:"อีเมล",type:"email",dense:"",outlined:"","lazy-rules":"",rules:[e=>e&&e.length>0||"กรุณากรอกอีเมล"]},null,8,["modelValue","rules"]),s(v,{modelValue:i.value,"onUpdate:modelValue":l[9]||(l[9]=e=>i.value=e),label:"รหัสผ่าน",type:"password",dense:"",outlined:"","lazy-rules":"",rules:[e=>e&&e.length>0||"กรุณากรอกรหัสผ่าน"]},null,8,["modelValue","rules"]),o.value?(f(),b(v,{key:5,modelValue:h.value,"onUpdate:modelValue":l[10]||(l[10]=e=>h.value=e),label:"ยืนยันรหัสผ่าน",type:"password",dense:"",outlined:"",rules:[e=>e===i.value||"รหัสผ่านไม่ตรงกัน"]},null,8,["modelValue","rules"])):V("",!0)]),_:1}),s(ue,{class:"q-px-md q-pb-md column q-gutter-sm"},{default:c(()=>[s(P,{onClick:Q,color:"primary",class:"full-width",loading:d.value},{loading:c(()=>[s(ae,{class:"on-left"}),l[12]||(l[12]=N(" กำลังติดต่อ Server... ",-1))]),default:c(()=>[N(B(o.value?"ยืนยันการสมัคร":"เข้าสู่ระบบ")+" ",1)]),_:1},8,["loading"]),s(P,{flat:"",color:"secondary",class:"full-width",onClick:C},{default:c(()=>[N(B(o.value?"มีบัญชีอยู่แล้ว? เข้าสู่ระบบ":"ยังไม่มีบัญชี? สมัครสมาชิก"),1)]),_:1})]),_:1})]),_:1})]),_:1}))}});export{ge as default};
